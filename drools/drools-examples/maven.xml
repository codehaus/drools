
<project default="java:jar">

    <preGoal name="test:test">
      <copy toDir="${maven.test.dest}">
        <fileset dir="${basedir}/src/java/main/">
          <include name="**/*.xml"/>
        </fileset>
      </copy>
    </preGoal>

    <goal name="drools:compile-examples">
      <echo>compiling examples</echo>
      <mkdir dir="${drools.examples.dest.dir}"/>
      <javac srcdir="${drools.examples.src.dir}"
             destdir="${drools.examples.dest.dir}">
        <classpath>
          <path refid="maven.dependency.classpath"/>
          <path location="target/${maven.final.name}.jar"/>
        </classpath>
      </javac>
      <copy toDir="${drools.examples.dest.dir}">
        <fileset dir="${drools.examples.src.dir}">
          <include name="**/*.drl"/>
        </fileset>
      </copy>
    </goal>

    <goal name="drools:example-escalation"
          prereqs="drools:compile-examples">
      <echo>running escalation example</echo>
      <java classname="escalation.Escalation"> 
        <classpath>
          <path refid="maven.dependency.classpath"/>
          <path location="target/${maven.final.name}.jar"/>
          <path location="${drools.examples.dest.dir}"/>
        </classpath>
      </java>
    </goal>

</project>
