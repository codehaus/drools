
<project default="java:jar" xmlns:jxr="jxr">

    <preGoal name="test:test">
      <copy toDir="${maven.test.dest}">
        <fileset dir="${basedir}/src/java/main/">
          <include name="**/*.xml"/>
        </fileset>
      </copy>
    </preGoal>

    <goal name="drools:examples">
      <attainGoal name="drools:example-escalation"/>
      <attainGoal name="drools:example-fishmonger"/>
      <attainGoal name="drools:example-sisters"/>
    </goal>

    <goal name="drools:compile-examples">
      <echo>compiling examples</echo>
      <mkdir dir="${drools.examples.dest.dir}"/>
      <javac srcdir="${drools.examples.src.dir}"
             destdir="${drools.examples.dest.dir}">
        <classpath>
          <path refid="maven.dependency.classpath"/>
          <path location="target/${maven.final.name}.jar"/>
        </classpath>
      </javac>
      <copy toDir="${drools.examples.dest.dir}">
        <fileset dir="${drools.examples.src.dir}">
          <include name="**/*.drl"/>
        </fileset>
      </copy>
    </goal>

    <goal name="drools:example-escalation"
          prereqs="drools:compile-examples">
      <echo>running escalation example</echo>
      <java classname="escalation.Escalation" fork="true"> 
        <classpath>
          <path refid="maven.dependency.classpath"/>
          <path location="target/${maven.final.name}.jar"/>
          <path location="${drools.examples.dest.dir}"/>
        </classpath>
      </java>
    </goal>

    <goal name="drools:example-sisters"
          prereqs="drools:compile-examples">
      <echo>running sisters example</echo>
      <java classname="sisters.Sisters" fork="true"> 
        <classpath>
          <path refid="maven.dependency.classpath"/>
          <path location="target/${maven.final.name}.jar"/>
          <path location="${drools.examples.dest.dir}"/>
        </classpath>
      </java>
    </goal>

    <goal name="drools:example-fishmonger"
          prereqs="drools:compile-examples">
      <echo>running fishmonger example</echo>
      <java classname="fishmonger.FishMonger" fork="true"> 
        <classpath>
          <path refid="maven.dependency.classpath"/>
          <path location="target/${maven.final.name}.jar"/>
          <path location="${drools.examples.dest.dir}"/>
        </classpath>
      </java>
    </goal>

    <postGoal name="jxr:generate">
      <jxr:jxr
        basedir="${basedir}"
        sourceDir="./src/java/examples"
        destDir="${maven.jxr.destdir}"
        javadocDir="${maven.javadoc.destdir}"
        imageFolder="${basedir}/xdocs/images/folder.gif"
        imageFile="${basedir}/xdocs/images/file.gif">
      </jxr:jxr>
    </postGoal>

</project>
