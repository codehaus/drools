<?xml version="1.0"?>
<!--
     File:       conf_user.xml
     Purpose:    XML User Configuration File 
     Author:     Martin Hald <martin.hald@bigfoot.com> 
     Created:    3/19/2002
     Desc:       XML file used to define rules related to email events.
     Tested:     Drools 2.0 Beta
-->
<?xml:stylesheet type="text/xsl" href="total.xsl"?>
<user>
   <!-- General user information -->
   <name>John Doe</name>
   <email>john.doe@budweiser.com</email>
   <!-- Email and Contact related rules. Each rule has a description, and 
        one or more conditions on which it will activate and one or more 
        actions to execute. -->
   <rules>
      <rule id="1" name="Handle emails from Jane">
         <description>Move all emails from Jane into the People/Jane folder.</description>
         <condition>
            <!-- All email elements must include a type.  Valid 
                 types are inbound|outbound|new.  Setting the type
                 is important because it is what allows the rule
                 engine to examine, update or create emails. -->
            <email type="inbound">
               <sender>jane.doe@budweiser.com</sender>
            </email>
         </condition>
         <action>
            <move>
               <folder>People/Jane</folder>
            </move>
         </action>
      </rule>
      <rule id="2" name="Handle emails marked urgent">
         <description>Contact me if an email marked urgent is recieved.  Let
            the contact request pass through my regular contact rules.
         </description>
         <condition>
            <email type="inbound">
               <!-- X-Priority is a RFC allowed extension of the MIME headers.
                    This example uses the Microsoft notation for setting a priority
                    number on an email.   A priority of "1" corresponds to a
                    "High" priority. -->
               <header value="1">X-Priority</header>
            </email>
         </condition>
         <action>
            <email type="new">
               <!-- The filter mechanism allows the author to tag an email with
                    a filter string, and thereby control which other rules (or
                    set of rules) will examine the email.  Emails will never be
                    sent unless they are free of filters. -->
               <filter action="add">contact</filter>
               <subject>An Email Marked Urgent was Recieved</subject>
            </email>
         </action>
      </rule>
      <rule id="3" name="Contact preferences from 8:00 AM to 5:00 PM">
         <description>During business hours if an urgent request comes
            through then just email my pager.
         </description>
         <condition>
            <email type="outbound">
              <filter>contact</filter>
            </email>
         </condition>
         <!-- The time format is specified in military time.  Thereby the
              valid range is from 0000 to 2400.  -->
         <condition>
            <time relation="after">0800</time>
         </condition>
         <condition>
            <time relation="before">1700</time>
         </condition>
         <action>
            <email type="outbound">
               <to>john.doe@telco.pager.net</to>
               <!-- Clearing the filter allows the email to be sent -->
               <filter action="remove">contact</filter>
            </email>
         </action>
      </rule>
      <rule id="4" name="Contact preferences for off hours">
         <description>My default contact location is to be emailed
            at my home address if none of my others contact rules apply.
         </description>
         <condition>
            <email type="outbound">
              <filter>contact</filter>
            </email>
         </condition>
         <action>
            <email type="outbound">
               <to>john.doe@budweiser.com</to>
               <filter action="remove">contact</filter>
            </email>
         </action>
      </rule>
   </rules>
</user>
