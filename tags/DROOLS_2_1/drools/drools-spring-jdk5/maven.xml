<?xml version="1.0" encoding="UTF-8"?>
<project default="default"
    xmlns:ant="jelly:ant"
    xmlns:j="jelly:core"
    xmlns:u="jelly:util"
    xmlns:maven="jelly:maven">

    <goal name="default">
        <attainGoal name="jar:jar"/>
    </goal>

    <!-- @Hack - Maven does not allow inter-project test dependencies. If ever adding new files -->
    <!-- be sure to update the appropriate .cvsignore -->
    <preGoal name="test:compile">
        <copy todir="${basedir}/src/test/org/drools/spring/metadata">
            <fileset dir="${basedir}/../drools-spring/src/test/org/drools/spring/metadata" includes="MethodMetadataSourceTestCase.java" />
        </copy>
        <copy todir="${basedir}/src/test/org/drools/spring">
            <fileset dir="${basedir}/../drools-spring/src/test/org/drools/spring" includes="SpringTestSetup.java" />
        </copy>
    </preGoal>

    <goal name="reports:publish">
        <j:set var="drools.dcontrol.htdocs.module"
            value="${drools.dcontrol.htdocs}/drools-java-anno" />
        <ant:delete dir="${drools.dcontrol.htdocs.module}/clover" />
        <ant:copy todir="${drools.dcontrol.htdocs.module}/clover">
            <ant:fileset dir="${basedir}/target/docs/clover" />
        </ant:copy>

        <ant:delete dir="${drools.dcontrol.htdocs.module}/junit" />
        <ant:copy todir="${drools.dcontrol.htdocs.module}/junit">
            <ant:fileset dir="${basedir}/target/test-reports" />
        </ant:copy>

        <ant:delete dir="${drools.dcontrol.htdocs.module}/checkstyle" />
        <ant:copy todir="${drools.dcontrol.htdocs.module}/checkstyle">
            <ant:fileset
                file="${basedir}/target/docs/checkstyle-report.html" />
        </ant:copy>
        <ant:copy
            todir="${drools.dcontrol.htdocs.module}/checkstyle/xref">
            <ant:fileset dir="${basedir}/target/docs/xref" />
        </ant:copy>
        <ant:copy
            todir="${drools.dcontrol.htdocs.module}/checkstyle/style">
            <ant:fileset dir="${basedir}/target/docs/style" />
        </ant:copy>
        <ant:copy
            todir="${drools.dcontrol.htdocs.module}/checkstyle/images">
            <ant:fileset dir="${basedir}/target/docs/images" />
        </ant:copy>
    </goal>

</project>
