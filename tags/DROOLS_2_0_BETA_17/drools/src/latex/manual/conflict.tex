\chapter{Conflict Resolution}
\label{conflict}
\index{conflict resolution}

\section{Introduction}

When knowledge is manipulated, many rules may become \emph{activated}.
The consequences of the rules fire serially and thus must be ordered
in the activation queue\index{activation queue}\footnote{The activation queue is formally
known as the \emph{agenda}\index{agenda}.}.  Since firing one consequence may
manipulate knowledge, the order of rule firing is important. Different
end-results may occur based upon different firing order. Applying an 
order to the activations is called a \emph{conflict resolution
strategy}. Each \indexClass{RuleBase} has a conflict resolution strategy that
determines how rules are prioritized.
Custom conflict resolution strategies may be devised for each
rule-base, but several standard ones are available for use.

\section{\indexClass{SalienceConflictResolutionStrategy}}

Each \indexClass{Rule} has a \emph{salience} property attached
to it.  By default every rule has a salience of zero, but during
assembly, either programmatically using the Rule Assembly API
(Chapter~\vref{assembly}) or through the DRL (Chapter~\vref{drl})
a specific non-default salience value may be applied to each rule.

Salience is a form of priority where rules with higher salience
values are given higher priority when ordered in the activation
queue.  In the event that multiple rules are assigned the same
salience value, they are placed upon the queue in an arbitrary
order.

To use a salience-based conflict resolution strategy, the
\indexClass{RuleBase} should be built using an instance of
the \indexClass{SalienceConflictResolutionStrategy} class.
For ease of use a
\indexMethod{SalienceConflictResolutionStrategy}{getInstance()}
method is provided (Figure~\vref{conflict.salience}).

\begin{figure}
\begin{javaCodelisting}
RuleBaseBuilder builder = new RuleBaseBuilder();

builder.setConflictResolutionStrategy(
                            SalienceConflictResolutionStrategy.getInstance() );
\end{javaCodelisting}
\caption{Using a \indexClass{SalienceConflictResolutionStrategy}}
\label{conflict.salience}
\end{figure}

\section{\indexClass{ComplexityConflictResolutionStrategy}}

Built upon the \indexClass{SalienceConflictResolutionStrategy}, a
strategy that first takes into account the \emph{complexity} of
the conflicting rules is available.  The
\indexClass{ComplexityConflictResolutionStrategy} initially orders 
activations by their complexity as measured by the number of
conditions in each rule.  Rules with more conditions have a higher
complexity and thus a higher priority when compared to rules with
fewer conditions.  When rules have the same complexity, ties are
broken using their salience values.  

\section{\indexClass{SimplicityConflictResolutionStrategy}}

Also built upon the \indexClass{SalienceConflictResolutionStrategy},
a strategy that first takes into account the \emph{simplicity} of the
conflicting rules is available.  The
\indexClass{SimplicityConflictResolutionStrategy} may be thought of as
the inverse of the complexity-based strategy.  Rules with less 
conditions are given higher priority than those with more.  Once
again, when conflicting rules have the same measure of simplicity, 
the strategy falls back to resolving conflicts based upon salience.
