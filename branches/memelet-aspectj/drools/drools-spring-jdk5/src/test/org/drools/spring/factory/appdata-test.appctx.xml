<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE beans PUBLIC "-//SPRING//DTD BEAN//EN" "http://www.springframework.org/dtd/spring-beans.dtd">

<beans>

	<bean id="ruleFactoryBean" abstract="true"
		class="org.drools.spring.factory.BasicRuleFactoryBean">
		<property name="ruleMetadataSourceChain">
			<list>
				<bean class="org.drools.spring.metadata.annotation.java.AnnotationRuleMetadataSource"/>
			</list>
		</property>
		<property name="methodMetadataSourceChain">
			<list>
				<bean class="org.drools.spring.metadata.annotation.java.AnnotationMethodMetadataSource"/>
			</list>
		</property>
		<property name="argumentMetadataSourceChain">
			<list>
				<bean class="org.drools.spring.metadata.annotation.java.AnnotationArgumentMetadataSource"/>
			</list>
		</property>
	</bean>


	<bean id="auditService"
		class="org.drools.spring.factory.AuditService" />

	<bean id="applicationDataRule" parent="ruleFactoryBean">
		<property name="pojo">
			<bean class="org.drools.spring.factory.ApplicationDataUsingRule" />
		</property>
	</bean>

    <bean id="ruleSet" lazy-init="true"
        class="org.drools.spring.factory.RuleSetFactoryBean">
        <property name="rules">
            <set>
                <ref local="applicationDataRule"/>
            </set>
        </property>
    </bean>


	<bean id="ruleBase" lazy-init="true"
		class="org.drools.spring.factory.RuleBaseFactoryBean">
		<property name="ruleSets">
			<list>
				<ref local="ruleSet" />
			</list>
		</property>
	</bean>

	<bean id="workingMemory" lazy-init="true"
		class="org.drools.spring.factory.WorkingMemoryFactoryBean">
		<property name="ruleBase">
			<ref local="ruleBase"/>
		</property>
		<!-- Not testable yet
		<property name="applicationData">
			<map>
				<entry key="childComment">
					<value>this is a child comment</value>
				</entry>
				<entry key="adultComment">
					<value>this is an adult comment</value>
				</entry>
			</map>
		</property>
		-->
	</bean>

</beans>